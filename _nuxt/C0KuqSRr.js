import{_ as G}from"./DfSc1twQ.js";import L from"./4ugFV_Cu.js";import{_ as R}from"./BSZ4qPVA.js";import U from"./BkZqFZar.js";import z from"./BIV4D_ly.js";import{y as F,v as $,ah as E,J as M,k as N,d as T,r as v,V as W,aC as j,o as J,a as I,M as Q,b as _,c as X,g as A,w as H,G as b,D as y,f as x,e as Y,t as Z,n as ee,aL as te,s as se}from"./NDZgLq3h.js";import{u as ne}from"./C8idJT66.js";const P=()=>{const t=F().sidebar;return t?ae(t):[]},ae=t=>{const a=Object.keys(t).sort((n,o)=>o.length-n.length);for(const n of a)if(decodeURI($().path).startsWith(n)){const o=t[n];return o?oe(o):[]}return[]},oe=t=>{const a=N(),{toc:n}=E(),o=(i,c)=>{var p,d;const r=M.isEmpty(i.items)?{...i,url:a.$versioning.useVersionedLink(i.url??"")}:i;return"items"in r?{type:"group",key:c,...r,items:(p=r.items)==null?void 0:p.map((f,g)=>o(f,`${c}_${g}`))}:{type:"page",key:c,...r,items:r.url===$().path&&n.value?S(((d=n.value.links[0])==null?void 0:d.depth)===1?n.value.links[0].children:n.value.links,c):void 0}};return t.map((i,c)=>o(i,`item_${c}`))},S=(t,a,n=2)=>n>0?t.map((o,i)=>ie(o,`${a}_${i}`,n-1)):void 0,ie=(t,a,n)=>{const{page:o}=E(),i=()=>{const c=o.value.body.children.find(p=>{var d;return p.tag==="h3"&&((d=p.props)==null?void 0:d.id)===t.id}),r=c==null?void 0:c.children.find(p=>p.tag==="span");return r==null?void 0:r.props["http-method"]};return"children"in t?{type:"heading",key:a,label:t.text,hash:t.id,httpMethod:i(),items:S(t.children??[],a,n)}:{type:"heading",key:a,label:t.text,hash:t.id,httpMethod:i(),url:`${o.value._path}#${t.id}`}},re={class:"ss-sidebar"},ce={class:"ss-navbar-menuitem-link-label p-menuitem-text"},fe=T({__name:"SideNavbar",props:{showHeadings:{type:Boolean,default:!1}},async setup(t){let a,n;const o=t,i=N(),c=$(),r=async e=>{var h;const{data:l}=await i.runWithContext(()=>ne("sidebar"+e.url,()=>se().where({_path:{$eq:e.url}}).find(),"$DCrAzGFI9p")),[s]=l.value??[];return M.isEmpty(s)?{}:"items"in e?{...e,label:e.label??(s==null?void 0:s.title),icon:e.icon??(s==null?void 0:s.icon),items:e.type==="page"?o.showHeadings?e.items:void 0:await Promise.all(((h=e.items)==null?void 0:h.map(async w=>await r(w)))??[])}:{...e,label:e.label??(s==null?void 0:s.title),icon:e.icon??(s==null?void 0:s.icon)}},p=v(([a,n]=W(async()=>Promise.all(P().map(async e=>await r(e)))),a=await a,n(),a)),d=v({}),f=e=>{if(e.key&&e.items&&e.items.length){d.value[e.key]=!0;for(let l of e.items)f(l)}},g=()=>{for(let e of p.value)f(e)},m=v([]),k=v(),B=j({root:null,threshold:.5}),O=()=>{k.value=new IntersectionObserver(e=>{e.forEach(l=>{const s=l.target.getAttribute("id");s&&(m.value.includes(s)&&m.value.splice(m.value.indexOf(s),1),l.isIntersecting&&m.value.push(s))})},B),document.querySelectorAll(".ss-page h2[id], .ss-page h3[id], .ss-page h4[id], .ss-page h5[id], .ss-page h6[id]").forEach(e=>{var l;return(l=k.value)==null?void 0:l.observe(e)})};return J(()=>{g(),O()}),I(()=>{var e;(e=k.value)==null||e.disconnect()}),Q(()=>c.path,async()=>{p.value=await Promise.all(P().map(async e=>await r(e))),g()}),(e,l)=>{const s=G,h=L,w=R,V=U,K=z;return _(),X("nav",re,[A(s),A(K,{class:"ss-sidebar-menu",model:b(p),multiple:!0,expandedKeys:b(d),"onUpdate:expandedKeys":l[0]||(l[0]=u=>te(d)?d.value=u:null)},{item:H(({item:u,root:C,active:q,hasSubmenu:D})=>[b(M).isEmpty(u)?x("",!0):(_(),y(V,{key:0,class:ee({"ss-navbar-menuitem-link p-menuitem-link":!C,"p-panelmenu-header-action":C,"exact-active":u.type==="heading"&&b(m).includes(u.hash)}),to:u.url},{default:H(()=>[C?(_(),y(h,{key:0,class:"ss-sidebar-menuitem-header-icon",name:u.icon??"mdi:file-document-outline"},null,8,["name"])):x("",!0),u.httpMethod?(_(),y(w,{key:1,class:"ss-sidebar-menuitem-http-method",httpMethod:u.httpMethod},null,8,["httpMethod"])):x("",!0),Y("span",ce,Z(u.label),1),D&&u.type==="group"?(_(),y(h,{key:2,class:"ss-sidebar-menuitem-link-expand-icon p-submenu-icon",name:q?"prime:chevron-down":"prime:chevron-right"},null,8,["name"])):x("",!0)]),_:2},1032,["class","to"]))]),_:1},8,["model","expandedKeys"])])}}});export{fe as _};
