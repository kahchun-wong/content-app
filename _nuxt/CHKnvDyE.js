import{_ as O}from"./BEgnPFss.js";import K from"./Ct0i5cH9.js";import{_ as U}from"./CIOWu_oN.js";import{u as V,_ as q}from"./mu2Def69.js";import D from"./BdobJ46L.js";import{y as R,v as M,D as N,d as z,r as v,U as F,ax as G,o as L,a as T,N as j,b as _,c as W,g as $,w as H,H as y,f as x,e as I,t as J,n as Q,E as C,aN as X,s as Y}from"./qGVcagb8.js";import{u as Z}from"./BrJoJWZB.js";import"./CeAGV5g_.js";import{_ as ee}from"./BVFiTvYf.js";const A=()=>{const t=R().sidebar;return t?te(t):[]},te=t=>{const n=Object.keys(t).sort((a,s)=>s.length-a.length);for(const a of n)if(decodeURI(M().path).startsWith(a)){const s=t[a];return s?se(s):[]}return[]},se=t=>{const{toc:n}=N(),a=(s,o)=>{var c,p;const l=ee.isEmpty(s.items)?{...s,url:V(s.url??"")}:s;return"items"in l?{type:"group",key:o,...l,items:(c=l.items)==null?void 0:c.map((d,m)=>a(d,`${o}_${m}`))}:{type:"page",key:o,...l,items:l.url===M().path?P(((p=n.value.links[0])==null?void 0:p.depth)===1?n.value.links[0].children:n.value.links,o):[]}};return t.map((s,o)=>a(s,`item_${o}`))},P=(t,n,a=2)=>a>0?t.map((s,o)=>ne(s,`${n}_${o}`,a-1)):[],ne=(t,n,a)=>{const{page:s}=N(),o=()=>{const l=s.value.body.children.find(p=>{var d;return p.tag==="h3"&&((d=p.props)==null?void 0:d.id)===t.id}),c=l==null?void 0:l.children.find(p=>p.tag==="span");return c==null?void 0:c.props["http-method"]};return"children"in t?{type:"heading",key:n,label:t.text,hash:t.id,httpMethod:o(),items:P(t.children??[],n,a)}:{type:"heading",key:n,label:t.text,hash:t.id,httpMethod:o(),url:`${s.value._path}#${t.id}`}},ae={class:"ss-sidebar"},oe={class:"ss-navbar-menuitem-link-label p-menuitem-text"},_e=z({__name:"SideNavbar",props:{showHeadings:{type:Boolean,default:!1}},async setup(t){let n,a;const s=M(),o=async e=>{var u,h,f,g,b;const{data:i}=await Z(e.url??"",()=>Y().where({_path:{$eq:e.url}}).findOne(),"$DCrAzGFI9p");return"items"in e?{...e,label:e.label??((u=i.value)==null?void 0:u.title),icon:e.icon??((h=i.value)==null?void 0:h.icon),items:e.type==="page"?e.items:(f=e.items)==null?void 0:f.map(r=>o(r))}:{...e,label:e.label??((g=i.value)==null?void 0:g.title),icon:e.icon??((b=i.value)==null?void 0:b.icon)}},l=v(([n,a]=F(async()=>Promise.all(A().map(async e=>await o(e)))),n=await n,a(),n)),c=v({}),p=e=>{if(e.key&&e.items&&e.items.length){c.value[e.key]=!0;for(let i of e.items)p(i)}},d=()=>{for(let e of l.value)p(e)},m=v([]),k=v(),S=G({root:null,threshold:.5});return L(()=>{d(),k.value=new IntersectionObserver(e=>{e.forEach(i=>{const u=i.target.getAttribute("id");u&&(m.value.includes(u)&&m.value.splice(m.value.indexOf(u),1),i.isIntersecting&&m.value.push(u))})},S),document.querySelectorAll(".ss-page h2[id], .ss-page h3[id], .ss-page h4[id], .ss-page h5[id], .ss-page h6[id]").forEach(e=>{var i;return(i=k.value)==null?void 0:i.observe(e)})}),T(()=>{var e;(e=k.value)==null||e.disconnect()}),j(()=>s.path,async()=>{l.value=await Promise.all(A().map(async e=>await o(e))),d()}),(e,i)=>{const u=O,h=K,f=U,g=q,b=D;return _(),W("nav",ae,[$(u),$(b,{class:"ss-sidebar-menu",model:C(l),multiple:!0,expandedKeys:C(c),"onUpdate:expandedKeys":i[0]||(i[0]=r=>X(c)?c.value=r:null)},{item:H(({item:r,root:w,active:B,hasSubmenu:E})=>[r.type!=="heading"||r.type==="heading"&&e.showHeadings?(_(),y(g,{key:0,class:Q({"ss-navbar-menuitem-link p-menuitem-link":!w,"p-panelmenu-header-action":w,"exact-active":r.type==="heading"&&C(m).includes(r.hash)}),to:r.url},{default:H(()=>[w?(_(),y(h,{key:0,class:"ss-sidebar-menuitem-header-icon",name:r.icon??"mdi:file-document-outline"},null,8,["name"])):x("",!0),r.httpMethod?(_(),y(f,{key:1,class:"ss-sidebar-menuitem-http-method",httpMethod:r.httpMethod},null,8,["httpMethod"])):x("",!0),I("span",oe,J(r.label),1),E&&r.type==="group"?(_(),y(h,{key:2,class:"ss-sidebar-menuitem-link-expand-icon p-submenu-icon",name:B?"prime:chevron-down":"prime:chevron-right"},null,8,["name"])):x("",!0)]),_:2},1032,["class","to"])):x("",!0)]),_:1},8,["model","expandedKeys"])])}}});export{_e as _};
