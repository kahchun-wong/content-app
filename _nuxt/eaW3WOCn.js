import{_ as K}from"./B8ou444x.js";import U from"./C6NVDcnb.js";import{_ as V}from"./CPiUccDw.js";import{u as q,_ as D}from"./BeLoEsnt.js";import R from"./I248xOnB.js";import{y as z,v as $,D as P,d as F,r as v,U as G,ax as L,o as T,a as W,N as j,b as _,c as I,g as A,w as H,H as x,f as k,e as J,t as Q,n as X,E as M,aO as Y,s as Z,k as ee}from"./CltHwUUF.js";import{u as te}from"./DqDvlnQB.js";import"./CeAGV5g_.js";import{_ as se}from"./BVFiTvYf.js";const N=()=>{const t=z().sidebar;return t?ne(t):[]},ne=t=>{const n=Object.keys(t).sort((a,s)=>s.length-a.length);for(const a of n)if(decodeURI($().path).startsWith(a)){const s=t[a];return s?ae(s):[]}return[]},ae=t=>{const{toc:n}=P(),a=(s,r)=>{var p,c;const l=se.isEmpty(s.items)?{...s,url:q(s.url??"")}:s;return"items"in l?{type:"group",key:r,...l,items:(p=l.items)==null?void 0:p.map((d,f)=>a(d,`${r}_${f}`))}:{type:"page",key:r,...l,items:l.url===$().path?O(((c=n.value.links[0])==null?void 0:c.depth)===1?n.value.links[0].children:n.value.links,r):[]}};return t.map((s,r)=>a(s,`item_${r}`))},O=(t,n,a=2)=>a>0?t.map((s,r)=>oe(s,`${n}_${r}`,a-1)):[],oe=(t,n,a)=>{const{page:s}=P(),r=()=>{const l=s.value.body.children.find(c=>{var d;return c.tag==="h3"&&((d=c.props)==null?void 0:d.id)===t.id}),p=l==null?void 0:l.children.find(c=>c.tag==="span");return p==null?void 0:p.props["http-method"]};return"children"in t?{type:"heading",key:n,label:t.text,hash:t.id,httpMethod:r(),items:O(t.children??[],n,a)}:{type:"heading",key:n,label:t.text,hash:t.id,httpMethod:r(),url:`${s.value._path}#${t.id}`}},ie={class:"ss-sidebar"},re={class:"ss-navbar-menuitem-link-label p-menuitem-text"},ge=F({__name:"SideNavbar",props:{showHeadings:{type:Boolean,default:!1}},async setup(t){let n,a;const s=ee(),r=$(),l=async e=>{var u,h,g,y,b;const{data:o}=await s.runWithContext(async()=>te(e.url??"",()=>Z().where({_path:{$eq:e.url}}).findOne(),"$DCrAzGFI9p"));return"items"in e?{...e,label:e.label??((u=o.value)==null?void 0:u.title),icon:e.icon??((h=o.value)==null?void 0:h.icon),items:e.type==="page"?e.items:await Promise.all(((g=e.items)==null?void 0:g.map(async i=>await l(i)))??[])}:{...e,label:e.label??((y=o.value)==null?void 0:y.title),icon:e.icon??((b=o.value)==null?void 0:b.icon)}},p=v(([n,a]=G(async()=>Promise.all(N().map(async e=>await l(e)))),n=await n,a(),n)),c=v({}),d=e=>{if(e.key&&e.items&&e.items.length){c.value[e.key]=!0;for(let o of e.items)d(o)}},f=()=>{for(let e of p.value)d(e)},m=v([]),w=v(),S=L({root:null,threshold:.5});return T(()=>{f(),w.value=new IntersectionObserver(e=>{e.forEach(o=>{const u=o.target.getAttribute("id");u&&(m.value.includes(u)&&m.value.splice(m.value.indexOf(u),1),o.isIntersecting&&m.value.push(u))})},S),document.querySelectorAll(".ss-page h2[id], .ss-page h3[id], .ss-page h4[id], .ss-page h5[id], .ss-page h6[id]").forEach(e=>{var o;return(o=w.value)==null?void 0:o.observe(e)})}),W(()=>{var e;(e=w.value)==null||e.disconnect()}),j(()=>r.path,async()=>{p.value=await Promise.all(N().map(async e=>await l(e))),f()}),(e,o)=>{const u=K,h=U,g=V,y=D,b=R;return _(),I("nav",ie,[A(u),A(b,{class:"ss-sidebar-menu",model:M(p),multiple:!0,expandedKeys:M(c),"onUpdate:expandedKeys":o[0]||(o[0]=i=>Y(c)?c.value=i:null)},{item:H(({item:i,root:C,active:B,hasSubmenu:E})=>[i.type!=="heading"||i.type==="heading"&&e.showHeadings?(_(),x(y,{key:0,class:X({"ss-navbar-menuitem-link p-menuitem-link":!C,"p-panelmenu-header-action":C,"exact-active":i.type==="heading"&&M(m).includes(i.hash)}),to:i.url},{default:H(()=>[C?(_(),x(h,{key:0,class:"ss-sidebar-menuitem-header-icon",name:i.icon??"mdi:file-document-outline"},null,8,["name"])):k("",!0),i.httpMethod?(_(),x(g,{key:1,class:"ss-sidebar-menuitem-http-method",httpMethod:i.httpMethod},null,8,["httpMethod"])):k("",!0),J("span",re,Q(i.label),1),E&&i.type==="group"?(_(),x(h,{key:2,class:"ss-sidebar-menuitem-link-expand-icon p-submenu-icon",name:B?"prime:chevron-down":"prime:chevron-right"},null,8,["name"])):k("",!0)]),_:2},1032,["class","to"])):k("",!0)]),_:1},8,["model","expandedKeys"])])}}});export{ge as _};
