var m=Object.defineProperty;var p=(t,r,s)=>r in t?m(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var n=(t,r,s)=>(p(t,typeof r!="symbol"?r+"":r,s),s);import{v as l,y as u}from"./DNP2Nq_8.js";import"./CeAGV5g_.js";import{_ as a}from"./BVFiTvYf.js";const c=t=>{const r=l().path;for(const s of t)for(const e of s.versions){const o=r.split("/");o.pop();let i="/";if(e.path.split("/").filter(f=>f).map(()=>i="/"+o.pop()+i),i===e.path)return{platform:s,version:e}}};class h{constructor(){n(this,"currentPlatform");n(this,"currentVersion");n(this,"platforms");n(this,"versions");this.platforms=[],this.versions=[]}loadVersions(r){const s=u().productVersions;if(a.isEmpty(s))return;const e=s[r];if(a.isEmpty(e.platforms)){console.warn(`'platforms' field of '${r}' is missing or empty.`);return}this.platforms=e.platforms;const o=c(this.platforms);if(this.currentPlatform=o?o.platform:this.platforms[0],a.isEmpty(this.currentPlatform.versions)){console.warn(`'versions' field of '${r}-${this.currentPlatform.name}' is missing or empty.`);return}this.versions=this.currentPlatform.versions,this.currentVersion=o?o.version:this.versions[0]}getCurrentPlatform(){return this.currentPlatform}getCurrentVersion(){return this.currentVersion}getPlatforms(){return this.platforms}getVersions(){return this.versions}}const y=()=>new h;export{y as u};
